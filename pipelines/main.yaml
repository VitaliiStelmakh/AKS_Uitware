trigger:
  branches:
    include:
    - main  
  paths:
    include:
    - ./charts/bestrong-api
    exclude:
      - README.md
      - pipelines



variables:
  acrName: 'helmcontainer'  # Add your Azure Container Registry name
  serviceConnection: 'Azure for Students(12c692a0-00e1-447a-8d87-2712018a0472)'  # Name of the Azure service connection


stages:
- stage: Pack helm chart and push to ACR
  displayName: Helm chart packing and push to ACR 
  pool:
    vmImage: 'ubuntu-latest'
  jobs:
  - job: Helm install pack and push
    displayName: Helm install pack and push to ACR
    steps:
      - template: pipelines/templates/build.yaml
        parameters:
          acrName: $(acrName)
          serviceConnection: $(serviceConnection)